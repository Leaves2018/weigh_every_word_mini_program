module.exports = {
  // 点击方法：标记所有符合class定位的词
  tap: function(event, ownerInstance) {
    var text = event.currentTarget.dataset.text;
    var instance = ownerInstance.selectAllComponents('.item.' + text);
    for (var i = 0; i < instance.length; i++) {
      instance[i].setStyle({
        "background": "greenyellow",
      })
    }
    // 触发事件tapword，传递点击的单词信息
    ownerInstance.triggerEvent('tapword', {text: event.currentTarget.dataset.text})
    return true;
  },
  // 在passage中对words设置style
  highlight: function(newValue, oldValue, ownerInstance, instance) {
    if (newValue) {
      for (var i = 0; i < newValue.length; i++) {
        var words = newValue[i]['words'];
        var style = newValue[i]['style'];
        for (var j = 0; j < words.length; j++) {
          var instance = ownerInstance.selectAllComponents('.item.' + words[j]);
          for (var k = 0; k < instance.length; k++) {
            instance[k].setStyle(style);
          }
        }
      }
    }
  }
}